{"version":3,"file":"MailRow.js","sourceRoot":"","sources":["../../../../../src/mail-app/mail/view/MailRow.ts"],"names":[],"mappings":"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","sourcesContent":["import { getMailFolderType, MailSetKind, MailState, ReplyType } from \"../../../common/api/common/TutanotaConstants\"\nimport { FontIcons } from \"../../../common/gui/base/icons/FontIcons\"\nimport type { Mail, MailFolder } from \"../../../common/api/entities/tutanota/TypeRefs.js\"\nimport { formatTimeOrDateOrYesterday } from \"../../../common/misc/Formatter.js\"\nimport m, { Children } from \"mithril\"\nimport Badge from \"../../../common/gui/base/Badge\"\nimport {\n\tcheckboxOpacity,\n\tscaleXHide,\n\tscaleXShow,\n\tselectableRowAnimParams,\n\tSelectableRowContainer,\n\tSelectableRowSelectedSetter,\n\tsetVisibility,\n\tshouldAlwaysShowMultiselectCheckbox,\n} from \"../../../common/gui/SelectableRowContainer.js\"\nimport { px, size } from \"../../../common/gui/size.js\"\nimport { NBSP, noOp } from \"@tutao/tutanota-utils\"\nimport { VirtualRow } from \"../../../common/gui/base/ListUtils.js\"\nimport { companyTeamLabel } from \"../../../common/misc/ClientConstants.js\"\nimport { getConfidentialFontIcon, isTutanotaTeamMail } from \"./MailGuiUtils.js\"\nimport { mailLocator } from \"../../mailLocator.js\"\nimport { getSenderOrRecipientHeading } from \"./MailViewerUtils.js\"\nimport { getLabelColor } from \"../../../common/gui/base/Label\"\nimport { colorForBg } from \"../../../common/gui/base/GuiUtils\"\nimport { theme } from \"../../../common/gui/theme\"\n\nconst iconMap: Record<MailSetKind, string> = {\n\t[MailSetKind.CUSTOM]: FontIcons.Folder,\n\t[MailSetKind.INBOX]: FontIcons.Inbox,\n\t[MailSetKind.SENT]: FontIcons.Sent,\n\t[MailSetKind.TRASH]: FontIcons.Trash,\n\t[MailSetKind.ARCHIVE]: FontIcons.Archive,\n\t[MailSetKind.SPAM]: FontIcons.Spam,\n\t[MailSetKind.DRAFT]: FontIcons.Draft,\n\t[MailSetKind.ALL]: FontIcons.Folder,\n\t[MailSetKind.LABEL]: FontIcons.Folder,\n\t[MailSetKind.Imported]: FontIcons.Folder,\n}\n\nexport const MAIL_ROW_V_MARGIN = 3\n\nconst shiftByForCheckbox = px(10)\nconst translateXHide = \"translateX(0)\"\nconst translateXShow = `translateX(${shiftByForCheckbox})`\n\nconst ELLIPSIS = \"\\u2026\"\n\nconst MAX_DISPLAYED_LABELS = 6\n\nexport class MailRow implements VirtualRow<Mail> {\n\ttop: number\n\tdomElement: HTMLElement | null = null\n\n\tentity: Mail | null = null\n\tprivate subjectDom!: HTMLElement\n\tprivate senderDom!: HTMLElement\n\tprivate dateDom!: HTMLElement\n\tprivate iconsDom!: HTMLElement\n\tprivate unreadDom!: HTMLElement\n\tprivate teamLabelDom!: HTMLElement\n\tprivate labelsDom: HTMLElement[] = []\n\tprivate moreLabelsIndicatorDom!: HTMLElement\n\tprivate checkboxDom!: HTMLInputElement\n\tprivate checkboxWasVisible = shouldAlwaysShowMultiselectCheckbox()\n\tprivate selectionSetter!: SelectableRowSelectedSetter\n\n\tconstructor(\n\t\tprivate readonly showFolderIcon: boolean,\n\t\tprivate readonly getLabelsForMail: (mail: Mail) => ReadonlyArray<MailFolder>,\n\t\tprivate readonly onSelected: (mail: Mail, selected: boolean) => unknown,\n\t) {\n\t\tthis.top = 0\n\t\tthis.entity = null\n\t}\n\n\tupdate(mail: Mail, selected: boolean, isInMultiSelect: boolean): void {\n\t\tthis.entity = mail\n\n\t\tthis.selectionSetter(selected, isInMultiSelect)\n\t\tthis.checkboxDom.checked = isInMultiSelect && selected\n\n\t\tthis.iconsDom.textContent = this.iconsText(mail)\n\t\tthis.dateDom.textContent = formatTimeOrDateOrYesterday(mail.receivedDate)\n\t\tthis.senderDom.textContent = getSenderOrRecipientHeading(mail, true)\n\t\tthis.subjectDom.textContent = mail.subject || NBSP\n\n\t\tif (mail.unread) {\n\t\t\tthis.unreadDom.classList.remove(\"hidden\")\n\n\t\t\tthis.subjectDom.classList.add(\"b\")\n\t\t\tthis.senderDom.classList.add(\"b\")\n\t\t} else {\n\t\t\tthis.unreadDom.classList.add(\"hidden\")\n\n\t\t\tthis.subjectDom.classList.remove(\"b\")\n\t\t\tthis.senderDom.classList.remove(\"b\")\n\t\t}\n\t\tthis.updateLabels(mail)\n\n\t\tsetVisibility(this.teamLabelDom, isTutanotaTeamMail(mail))\n\t\tthis.showCheckboxAnimated(shouldAlwaysShowMultiselectCheckbox() || isInMultiSelect)\n\n\t\tcheckboxOpacity(this.checkboxDom, selected)\n\t}\n\n\tprivate updateLabels(mail: Mail) {\n\t\tconst labels = this.getLabelsForMail(mail)\n\n\t\tfor (const [i, element] of this.labelsDom.entries()) {\n\t\t\tconst label = labels[i]\n\t\t\tif (label) {\n\t\t\t\telement.style.display = \"\"\n\t\t\t\telement.style.backgroundColor = getLabelColor(label.color)\n\t\t\t\telement.style.color = colorForBg(label.color ?? theme.content_accent)\n\t\t\t\telement.textContent = label.name\n\t\t\t} else {\n\t\t\t\telement.style.display = \"none\"\n\t\t\t}\n\t\t}\n\t\tthis.moreLabelsIndicatorDom.style.display = labels.length > this.labelsDom.length ? \"\" : \"none\"\n\t}\n\n\tprivate showCheckboxAnimated(show: boolean) {\n\t\t// this causes a slide animation where checkbox pops up and the text is shifted to make space for it.\n\t\t// we can't animate the width of the checkbox as it causes the layout shifts and is very slow so instead we change the padding of the text elements in\n\t\t// a single step and then shift them in an animation. The effect is almost the same as if we would expand/shrink the checkbox.\n\t\t// using requestAnimationFrame() because when we toggle it some elements might not be there yet. Could also for the end of the event loop too.\n\t\t// using web animations to be able to cancel them easily. Could probably use transition and listen for the end instead but it would be harder to\n\t\t// do the bookkeeping.\n\t\t// using noOp to catch rejection when the animation is cancelled\n\t\tconst shouldShowCheckbox = show\n\t\tif (this.checkboxWasVisible === shouldShowCheckbox) return\n\n\t\tif (shouldShowCheckbox) {\n\t\t\tthis.senderDom.style.paddingRight = shiftByForCheckbox\n\t\t\tthis.subjectDom.style.paddingRight = shiftByForCheckbox\n\n\t\t\tconst showTranslateTransform = { transform: [translateXHide, translateXShow] }\n\t\t\tconst senderAnim = this.senderDom.animate(showTranslateTransform, selectableRowAnimParams)\n\t\t\tconst subjectAnim = this.subjectDom.animate(showTranslateTransform, selectableRowAnimParams)\n\t\t\tconst badgeAnim = this.teamLabelDom.animate(showTranslateTransform, selectableRowAnimParams)\n\t\t\tconst checkboxAnim = this.checkboxDom.animate({ transform: [scaleXHide, scaleXShow] }, selectableRowAnimParams)\n\n\t\t\tPromise.all([senderAnim.finished, subjectAnim.finished, checkboxAnim.finished]).then(() => {\n\t\t\t\tthis.showCheckbox(true)\n\n\t\t\t\tsenderAnim.cancel()\n\t\t\t\tsubjectAnim.cancel()\n\t\t\t\tbadgeAnim.cancel()\n\t\t\t\tcheckboxAnim.cancel()\n\t\t\t}, noOp)\n\t\t} else {\n\t\t\tthis.senderDom.style.paddingRight = \"0\"\n\t\t\tthis.subjectDom.style.paddingRight = \"0\"\n\n\t\t\tconst hideTranslateTransform = { transform: [translateXShow, translateXHide] }\n\t\t\tconst senderAnim = this.senderDom.animate(hideTranslateTransform, selectableRowAnimParams)\n\t\t\tconst subjectAnim = this.subjectDom.animate(hideTranslateTransform, selectableRowAnimParams)\n\t\t\tconst badgeAnim = this.teamLabelDom.animate(hideTranslateTransform, selectableRowAnimParams)\n\t\t\tconst checkboxAnim = this.checkboxDom.animate({ transform: [scaleXShow, scaleXHide] }, selectableRowAnimParams)\n\n\t\t\tPromise.all([senderAnim.finished, subjectAnim.finished, checkboxAnim.finished]).then(() => {\n\t\t\t\tthis.showCheckbox(false)\n\n\t\t\t\tsenderAnim.cancel()\n\t\t\t\tsubjectAnim.cancel()\n\t\t\t\tbadgeAnim.cancel()\n\t\t\t\tcheckboxAnim.cancel()\n\t\t\t}, noOp)\n\t\t}\n\t\tthis.checkboxWasVisible = shouldShowCheckbox\n\t}\n\n\tprivate showCheckbox(show: boolean) {\n\t\tlet translate\n\t\tlet scale\n\t\tlet padding\n\t\tif (show) {\n\t\t\ttranslate = translateXShow\n\t\t\tscale = scaleXShow\n\t\t\tpadding = shiftByForCheckbox\n\t\t} else {\n\t\t\ttranslate = translateXHide\n\t\t\tscale = scaleXHide\n\t\t\tpadding = \"0\"\n\t\t}\n\t\tthis.senderDom.style.transform = translate\n\t\tthis.subjectDom.style.transform = translate\n\t\tthis.teamLabelDom.style.transform = translate\n\t\tthis.checkboxDom.style.transform = scale\n\n\t\tthis.senderDom.style.paddingRight = padding\n\t\tthis.subjectDom.style.paddingRight = padding\n\n\t\t// we effectively remove it from interaction\n\t\tthis.checkboxDom.disabled = !show\n\t\tthis.checkboxDom.tabIndex = show ? 0 : -1\n\t}\n\n\t/**\n\t * Only the structure is managed by mithril. We set all contents on our own (see update) in order to avoid the vdom overhead (not negligible on mobiles)\n\t */\n\trender(): Children {\n\t\treturn m(\n\t\t\tSelectableRowContainer,\n\t\t\t{\n\t\t\t\tonSelectedChangeRef: (changer) => {\n\t\t\t\t\tthis.selectionSetter = changer\n\t\t\t\t},\n\t\t\t\toncreate: (vnode) => {\n\t\t\t\t\tthis.domElement = vnode.dom as HTMLElement\n\t\t\t\t\t// doing it right away to avoid visual glitch of it appearing/disappearing\n\t\t\t\t\t// but doing it at the end of the event loop because we touch other DOM elements too which might not be there yet\n\t\t\t\t\tPromise.resolve().then(() => this.showCheckbox(shouldAlwaysShowMultiselectCheckbox()))\n\t\t\t\t},\n\t\t\t},\n\t\t\t[\n\t\t\t\tm(\n\t\t\t\t\t\".flex.col.items-center.flex-no-grow.no-shrink.pt-xs.abs\",\n\t\t\t\t\tm(\"input.checkbox.list-checkbox\", {\n\t\t\t\t\t\ttype: \"checkbox\",\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tmarginBottom: \"7px\",\n\t\t\t\t\t\t\ttransformOrigin: \"left\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonclick: (e: MouseEvent) => {\n\t\t\t\t\t\t\te.stopPropagation()\n\t\t\t\t\t\t\t// e.redraw = false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonchange: () => {\n\t\t\t\t\t\t\tif (this.entity) this.onSelected(this.entity, this.checkboxDom.checked)\n\t\t\t\t\t\t},\n\t\t\t\t\t\toncreate: (vnode) => {\n\t\t\t\t\t\t\tthis.checkboxDom = vnode.dom as HTMLInputElement\n\t\t\t\t\t\t\tcheckboxOpacity(this.checkboxDom, false)\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t\tm(\".dot.bg-accent-fg.hidden\", {\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tmarginTop: px(MAIL_ROW_V_MARGIN),\n\t\t\t\t\t\t},\n\t\t\t\t\t\toncreate: (vnode) => (this.unreadDom = vnode.dom as HTMLElement),\n\t\t\t\t\t}),\n\t\t\t\t),\n\t\t\t\tm(\n\t\t\t\t\t\".flex-grow.min-width-0\",\n\t\t\t\t\t{\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tmarginLeft: px(size.checkbox_size + size.vpad_xs),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t[\n\t\t\t\t\t\tm(\".flex.badge-line-height\", [\n\t\t\t\t\t\t\tm(\n\t\t\t\t\t\t\t\tBadge,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tclasses: \".small.mr-s\",\n\t\t\t\t\t\t\t\t\toncreate: (vnode) => (this.teamLabelDom = vnode.dom as HTMLElement),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcompanyTeamLabel,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tm(\".text-ellipsis\", {\n\t\t\t\t\t\t\t\toncreate: (vnode) => (this.senderDom = vnode.dom as HTMLElement),\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tm(\n\t\t\t\t\t\t\t\t\".flex.flex-grow-shrink-0.justify-end\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\tminWidth: px(34), // so the moreLabelIndicator is visible on smaller screens\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tthis.renderLabels(),\n\t\t\t\t\t\t\t\tthis.renderLabelsMoreIndicator(),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tm(\"small.text-ellipsis.flex-fixed\", {\n\t\t\t\t\t\t\t\toncreate: (vnode) => (this.dateDom = vnode.dom as HTMLElement),\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t]),\n\t\t\t\t\t\tm(\".flex.mt-xxs\", [\n\t\t\t\t\t\t\tm(\".smaller.text-ellipsis\", {\n\t\t\t\t\t\t\t\toncreate: (vnode) => (this.subjectDom = vnode.dom as HTMLElement),\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tm(\".flex-grow\"),\n\t\t\t\t\t\t\tm(\"span.ion.ml-s.list-font-icons\", {\n\t\t\t\t\t\t\t\toncreate: (vnode) => (this.iconsDom = vnode.dom as HTMLElement),\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t]),\n\t\t\t\t\t],\n\t\t\t\t),\n\t\t\t],\n\t\t)\n\t}\n\n\tprivate renderLabelsMoreIndicator(): Children {\n\t\treturn m(\n\t\t\t\"span.smaller.text-center.text-ellipsis.border-radius-m\",\n\t\t\t{\n\t\t\t\tstyle: {\n\t\t\t\t\t// in dark theme override saturation to aid readability. This is not relative but absolute saturation. We preserve the hue.\n\t\t\t\t\tborder: `2px solid ${getLabelColor(theme.content_button)}`,\n\t\t\t\t\tcolor: getLabelColor(theme.content_button),\n\t\t\t\t\tpadding: `0px ${size.vpad_xsm}px 1px`,\n\t\t\t\t\tmarginRight: px(size.vpad_xsm),\n\t\t\t\t\tminWidth: px(16),\n\t\t\t\t\tlineHeight: px(8),\n\t\t\t\t},\n\t\t\t\toncreate: (vnode) => {\n\t\t\t\t\tthis.moreLabelsIndicatorDom = vnode.dom as HTMLElement\n\t\t\t\t},\n\t\t\t},\n\t\t\tELLIPSIS,\n\t\t)\n\t}\n\n\tprivate renderLabels(): Children {\n\t\treturn m(\n\t\t\t\".flex.overflow-hidden\",\n\t\t\t{\n\t\t\t\tstyle: {\n\t\t\t\t\tmargin: `0 ${size.vpad_xsm}px`,\n\t\t\t\t\tcolumnGap: px(size.vpad_xsm),\n\t\t\t\t\tmaxWidth: \"fit-content\",\n\t\t\t\t},\n\t\t\t},\n\t\t\tArray(MAX_DISPLAYED_LABELS)\n\t\t\t\t.fill(0)\n\t\t\t\t.map((_, i) =>\n\t\t\t\t\t// Not using the regular Label component as we have too\n\t\t\t\t\t// many differences and list is a special case anyway.\n\t\t\t\t\tm(\"span.small.text-center.text-ellipsis.border-radius-m\", {\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tpadding: `2px ${size.vpad_xsm}px`,\n\t\t\t\t\t\t\tminWidth: \"4ch\",\n\t\t\t\t\t\t\tmaxWidth: px(48),\n\t\t\t\t\t\t\tlineHeight: \"100%\",\n\t\t\t\t\t\t\ttextOverflow: \"'â€¥'\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\toncreate: (vnode) => {\n\t\t\t\t\t\t\tthis.labelsDom[i] = vnode.dom as HTMLElement\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t),\n\t\t)\n\t}\n\n\tprivate iconsText(mail: Mail): string {\n\t\tlet iconText = \"\"\n\n\t\tif (this.showFolderIcon) {\n\t\t\tlet folder = mailLocator.mailModel.getMailFolderForMail(mail)\n\t\t\ticonText += folder ? this.folderIcon(getMailFolderType(folder)) : \"\"\n\t\t}\n\n\t\ticonText += mail._errors ? FontIcons.Warning : \"\"\n\n\t\tif (mail.state === MailState.DRAFT) {\n\t\t\ticonText += FontIcons.Edit\n\t\t}\n\n\t\tswitch (mail.replyType) {\n\t\t\tcase ReplyType.REPLY:\n\t\t\t\ticonText += FontIcons.Reply\n\t\t\t\tbreak\n\n\t\t\tcase ReplyType.FORWARD:\n\t\t\t\ticonText += FontIcons.Forward\n\t\t\t\tbreak\n\n\t\t\tcase ReplyType.REPLY_FORWARD:\n\t\t\t\ticonText += FontIcons.Reply\n\t\t\t\ticonText += FontIcons.Forward\n\t\t\t\tbreak\n\t\t}\n\n\t\tif (mail.confidential) {\n\t\t\ticonText += getConfidentialFontIcon(mail)\n\t\t}\n\n\t\tif (mail.attachments.length > 0) {\n\t\t\ticonText += FontIcons.Attach\n\t\t}\n\n\t\treturn iconText\n\t}\n\n\tprivate folderIcon(type: MailSetKind): string {\n\t\treturn iconMap[type]\n\t}\n}\n"]}